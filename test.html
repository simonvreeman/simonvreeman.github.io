<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1">
    <title>Test</title>
    <link rel="dns-prefetch" href="https://www.google-analytics.com">
    <style>
      body {
        max-width: 33.75rem;
        margin: 0 auto;
        padding: 0 3%;
        font: 1.125em/1.618 BlinkMacSystemFont, -apple-system, "Segoe UI", system-ui, Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
      }
      dt {
        font-weight: 700;
      }
      code {
        font-family: SFMono-Regular, Consolas, "Liberation Mono", Menlo, Monaco, "Courier New", monospace;
        font-size: 1em;
        font-weight: normal;
        word-break: break-word;
        word-wrap: break-word;
      }
      @media (prefers-color-scheme: dark) {
        body {
          background-color: black;
          color: white;
        }
        a {
          color: lime;
        }
      }
    </style>
    <script>
      var ua = navigator.userAgent || navigator.vendor || window.opera;
      var ref = document.referrer;

      window.ga=function(){ga.q.push(arguments)},ga.q=[],ga.l=+new Date;
      ga("create", "UA-2826482-20", "auto"),
      ga("set", "transport", "beacon"),
      ga("send", "pageview", {
        'dimension10': ua,
        hitCallback: function() {
          callBack();
        }
      });
    </script>
    <script src="https://www.google-analytics.com/analytics.js" importance="high" async></script>
    <link rel="canonical" href="https://vreeman.com/">
    <meta name="robots" content="noindex, nofollow">
  </head>
  <body>
    <p>Some tests by <a href="https://vreeman.com" title="Simon Vreeman">Simon Vreeman</a></p>
    <ul>
      <li><a href="https://www.vanmoof.com/en_nl/" onclick="ga('send', 'event', 'test', 'click', 'vanmoof', {transport: 'beacon', nonInteraction: true});" target="_blank">VanMoof</a></li>
      <li><a href="https://www.vanmoof.com/en_nl/?ref=vreeman.com" onclick="ga('send', 'event', 'test', 'click', '?ref=vreeman.com', {transport: 'beacon', nonInteraction: true});" target="_blank" addestination="https://vanmoof.com" adcampaignid="1">VanMoof</a> ?ref=vreeman.com</li>
      <li><a href="https://www.vanmoof.com/en_nl/" onclick="ga('send', 'event', 'test', 'click', 'noopener noreferrer', {transport: 'beacon', nonInteraction: true});" target="_blank" rel="noopener noreferrer" addestination="https://vanmoof.com" adcampaignid="2">VanMoof</a> noopener noreferrer</li>
      <li><a href="http://bit.ly/2WYXtZ7" onclick="ga('send', 'event', 'test', 'click', 'bitly', {transport: 'beacon', nonInteraction: true});" target="_blank">VanMoof</a> bit.ly<a href="http://bit.ly/2WYXtZ7+" addestination="https://vanmoof.com" adcampaignid="3">+</a></li>
      <li><a href="#" onclick="ga('send', 'event', 'test', 'click', 'empty', {transport: 'beacon', nonInteraction: true});" addestination="https://vanmoof.com" adcampaignid="4">VanMoof</a></li>
    </ul>
    <ul>
    	<li><a href="https://vreeman.com?utm_source=test-page&utm_medium=internal&utm_campaign=break-a-session">With Google Analytics UTMs</a></li>
    	<li><a href="https://vreeman.com?ref=test-page">With Internal ref</a></li>
    </ul>
    <ul>
      <li><a rel="ar" href="https://vreeman.com/ar/iOS/vanmoof-electrified-s2-ios.reality"><img src="https://vreeman.com/ar/iOS/ARKit_Glyph.png"> AR iOS</a></li>
      <li><a href="https://vreeman.com/ar/SparkAR/vanmoof-electrified-s2-sparkar.glb">AR Android</a></li>
      <li><a rel="ar"href="https://vreeman.com/ar/iOS/mac-pro.usdz"><img src="https://vreeman.com/ar/iOS/ARKit_Glyph.png"> AR iOS 1</a></li>
      <li><a href="https://vreeman.com/ar/iOS/mac-pro-2.usdz">AR iOS 2</a></li>
    </ul>
    <hr>
    <dl>
      <dt>Cookies</dt>
      <dd><code id="cookies"></code></dd>
    </dl>
    <label for="days">Days:</label>
    <input type="number" name="days" id="days" name="days" min="1" max="1000" value="3" placeholder="42" step="1">
    <button onclick="setCookies();">Set Cookie</button>
    <button onclick="getCookies();">Get Cookies</button>
    <button onclick="deleteCookies();">Delete Cookie</button>
    <hr>
    <dl>
      <dt>navigator.userAgent</dt>
      <dd><code id="ua"></code></dd>
      <dt>document.referrer</dt>
      <dd><code id="ref"></code></dd>
      <dt>Google Analytics Client ID <code>_ga</code></dt>
      <dd><code id="clientid"></code></dd>
      <dt>Vreeman Client ID <code>_vr</code></dt>
      <dd><code id="vreemanid"></code></dd>
      <dt>Google Analytics Hit Payload</dt>
      <dd><code id="payload"></code></dd>
      <dt>window.performance.now</dt>
      <dd><code id="perf"></code></dd>
    </dl>
    <dl>
      <dt>Total screen width/height</dt>
      <dd><code><script>document.write( screen.width + ' &times; ' + screen.height );</script></code></dd>
      <dt>Available screen width/height</dt>
      <dd><code><script>document.write( screen.availWidth + ' &times; ' + screen.availHeight );</script></code></dd>
      <dt>Total browser width/height</dt>
      <dd><code><script>document.write( window.outerWidth + ' &times; ' + window.outerHeight );</script></code></dd>
      <dt>Available browser width/height</dt>
      <dd><code><script>document.write( window.innerWidth + ' &times; ' + window.innerHeight );</script></code></dd>
    </dl>
    <details>
      <summary>window.performance&#x2026;</summary>
      <ul>
        <script>
          for (b in window.performance.timing) {
            document.write('<li><strong>window.' + b + '</strong>: <code>' + window.performance.timing[b] + '</code></li>');
          }
        </script>
      </ul>
    </details>
    <details>
      <summary>navigator.connection&#x2026;</summary>
      <ul>
        <script>
          for (a in navigator.connection) {
            document.write('<li><strong>navigator.' + a + '</strong>: <code>' + navigator.connection[a] + '</code></li>');
          }
        </script>
      </ul>
    </details>
    <script>
      function callBack() {
        ga(function(tracker) {
          var clientid = tracker.get('clientId');
          document.getElementById("clientid").innerHTML = clientid;
          console.log(clientid);

          var payload = tracker.get('hitPayload');
          document.getElementById("payload").innerHTML = payload;
          console.log(payload);

          // var trackers = ga.getAll();
          // console.log(trackers);

          var date = new Date();
          date.setTime(date.getTime() + (730 * 24 * 60 * 60 * 1000));
          expires = date.toUTCString();
          document.cookie = "_vr=" + clientid + "; expires=" + expires + "; path=/";

          // get value of _vr cookie.
          var vreemanid = readCookie('_vr');
          console.log("_vr :: " + vreemanid);
          document.getElementById("vreemanid").innerHTML = vreemanid;
        });
      }

      function setCookies() {
        var today = new Date();
        var date = new Date();
        var days = document.getElementById('days').value;
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        expires = date.toUTCString();
        console.log(today);
        console.log(date);
        document.cookie = "vreeman-js=" + today + "; expires=" + expires + "; path=/";
      }
      function getCookies() {
        var cookies = document.cookie;
        document.getElementById("cookies").innerHTML = cookies;
      }
      function readCookie(name) {
        var nameEQ = name + "=";
        var ca = document.cookie.split(';');
        for(var i=0;i < ca.length;i++) {
          var c = ca[i];
          while (c.charAt(0)==' ') c = c.substring(1,c.length);
          if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
        }
        return null;
      }
      function deleteCookies() {
        var days = document.getElementById('days').value;
        document.cookie = "vreeman-js=" + days + "days; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/";
      }

      document.getElementById("ua").innerHTML = ua;
      document.getElementById("ref").innerHTML = ref;

      window.addEventListener('load', function() {
        var cookies = document.cookie;
        document.getElementById("cookies").innerHTML = cookies;
        var perf = Math.round(window.performance.now());
        document.getElementById("perf").innerHTML = perf;
      })
    </script>
    <script>
      var head = document.getElementsByTagName('head')[0];
      var script = document.createElement('script');
      script.type = 'text/javascript';
      script.onload = function() {
          callFunctionFromScript();
      }
      script.src = 'cloudflare.js';
      head.appendChild(script);
    </script>
  </body>
</html>