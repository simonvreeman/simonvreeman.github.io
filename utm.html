<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta http-equiv="Accept-CH" content="DPR, Viewport-Width, Width, Content-DPR, Downlink, Save-Data">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Google Analytics UTM Campaign URL Builder</title>
    <style>
      :root {
        --black: rgba(0, 0, 0, .8);
        --blue-dark: rgb(0, 112, 201);
        --blue-light: rgb(102, 187, 255);
        --gray: rgb(204, 204, 204);
        --white: rgba(255, 255, 255, 1);
      }
      html {
        overflow-y: scroll;
        overflow-x: hidden;
        -webkit-text-size-adjust: 100%;
        -ms-text-size-adjust: 100%;
      }
      body {
        margin: 1% auto;
        padding: 0 3%;
        max-width: 30em;
        background-color: rgba(0, 0, 0, 0);
        color: var(--black);
        font-family: BlinkMacSystemFont, -apple-system, "Segoe UI", system-ui, Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
        font-size: 1.125rem;
        line-height: 1.618;
      }
      footer, small {
        font-size: 80%;
      }
      b, dt, strong {
        font-weight: 700;
      }
      h1, h2, h3 {
        line-height: 1.2;
        letter-spacing: .02em;
      }
      a {
        background-color: transparent;
        color: var(--blue-dark);
        text-decoration: none;
        text-decoration-skip: ink;
        -ms-touch-action: manipulation;
        touch-action: manipulation;
      }
      a:hover, a:active, a:focus {
        color: var(--blue-light);
      }
      abbr[title] {
        text-decoration: none;
      }
      code {
        font-family: SFMono-Regular, Consolas, "Liberation Mono", Menlo, Monaco, "Courier New", monospace;
        font-size: 1em;
      }
      input, textarea {
        width: 95%;
        display: block;
        padding: .5em 1%;
        font-size: 1em;
      }
      fieldset, input, textarea {
        margin-bottom: 1.5em;
      }
      hr {
        border: 0;
        border-top: 1px solid var(--gray);
      }
      @media (prefers-color-scheme: dark) {
        body {
          background-color: var(--black);
          color: var(--white);
          word-spacing: .05em;
        }
        a {
          color: var(--blue-light);
        }
        a:hover, a:active, a:focus {
          color: var(--blue-dark);
        }
        input, select, textarea {
          background-color: var(--black);
          color: var(--white);
        }
        input:invalid {
          border: 5px dashed red;
        }
      }
      #wrapper {
        margin: auto;
        width: 70%;
        font-family: sans-serif;
      }
      .grid-container {
        display: grid;
        grid-template-rows: 50px;
        grid-template-areas: '. . .';
        padding-bottom: 10px;
      }
      .box-good {
        background-color: hsl(118, 41%, 49%);
      }
      .box-needs-improvement {
        background-color: hsl(31, 78%, 53%);
      }
      .box-poor {
        background-color: hsl(359, 80%, 50%);
      }
    </style>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://gtm.vreeman.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-WKSDWK');</script>
    <link rel="canonical" href="https://vreeman.com/utm.html">
    <link rel="alternate" href="https://vreeman.com/utm.html" hreflang="x-default">
    <link rel="alternate" href="https://vreeman.com/utm.html" hreflang="en">
    <meta name="description" content="A simple tool to easily add UTM tags for Google Analytics to your URL. And you can check the URL for Pagespeed, Structured Data or Facebook Open Graph.">
    <meta property="og:title" content="Google Analytics UTM Campaign URL Builder">
    <meta property="og:url" content="https://vreeman.com/utm.html">
    <meta property="og:description" content="A simple tool to easily add UTM tags for Google Analytics to your URL. And you can check the URL for Pagespeed, Structured Data or Facebook Open Graph.">
    <meta property="og:image" content="https://vreeman.com/img/tile-wide.png">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@vreeman">
    <meta name="twitter:creator" content="@vreeman">
    <meta name="twitter:title" content="Google Analytics UTM Campaign URL Builder">
    <meta name="twitter:description" content="A simple tool to easily add UTM tags for Google Analytics to your URL. And you can check the URL for Pagespeed, Structured Data or Facebook Open Graph.">
    <meta name="twitter:image" content="https://vreeman.com/img/tile-wide.png">
    <meta name="twitter:creator" content="@vreeman">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="URL Builder">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <meta name="theme-color" content="#000">
  </head>
  <body>
    <noscript><iframe src="https://gtm.vreeman.com/ns.html?id=GTM-WKSDWK" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <header>
      <h1>Google Analytics <abbr title="Urchin Tracking Module">UTM</abbr> Campaign <abbr title="Uniform Resource Locator">URL</abbr> Builder</h1>
      <p><a href="https://vreeman.com/" title="Simon Vreeman">Home</a> | <a href="cro.html" title="CRO Tools"><abbr title="Conversion Rate Optimization">CRO</abbr> Tools</a></p>
    </header>
    <p>A simple tool to create an <abbr title="Uniform Resource Locator">URL</abbr> with Google Analytics <abbr title="Urchin Tracking Module">UTM</abbr> campaign parameters. All input will be lowercase appended to the <abbr title="Uniform Resource Locator">URL</abbr>. The Google Analytics <abbr title="Urchin Tracking Module">UTM</abbr> Campaign <abbr title="Uniform Resource Locator">URL</abbr> Builder will also check if the <abbr title="Uniform Resource Locator">URL</abbr> already contains parameters and if it returns a successful <abbr title="Hypertext Transfer Protocol">HTTP</abbr> response status code. With one click you can add the <abbr title="Uniform Resource Locator">URL</abbr> to your clipboard.</p>
    <p>Make sure you are strict in using <code>utm_source</code> and <code>utm_medium</code>. Otherwise, you will end up with a lot of traffic in the (other) Default Channel Grouping. Your email campaigns should be tagged as <code>email</code> for you <code>utm_medium</code>. Then they will match for the Email Default Channel Grouping. More information about the Default Channel Grouping definitions and rules can be found <a href="https://support.google.com/analytics/answer/3297892?hl=en" rel="nofollow noopener noreferrer" target="_blank">here</a>.</p>
    <form onkeyup="getUTM()">
      <fieldset>
        <legend><abbr title="Uniform Resource Locator">URL</abbr>, Source, Medium, and Name are required</legend>
        <label for="campaigns">Predefined campaigns</label>
        <select id="campaigns">
          <option value="optional" selected>Optional</option>
          <option value="email">Email</option>
        </select>
        <br>
        <label for="domain"><abbr title="Uniform Resource Locator">URL</abbr> without <abbr title="Urchin Tracking Module">UTM</abbr> tags</label>
        <input type="url" inputmode="url" name="domain" id="domain" autocapitalize="none" autocomplete="off" placeholder="Required" value="https://vreeman.com" autofocus required>
        <label for="source">Campaign Source (<code>utm_source</code>)</label>
        <input type="text" name="source" id="source" autocapitalize="none" placeholder="Required" required>
        <label for="medium">Campaign Medium (<code>utm_medium</code>)</label>
        <input type="text" name="medium" id="medium" autocapitalize="none" placeholder="Required" required>
        <label for="name">Campaign Name (<code>utm_campaign</code>)</label>
        <input type="text" name="name" id="name" autocapitalize="none" placeholder="Required" required>
        <label for="term">Campaign Term (<code>utm_term</code>)</label>
        <input type="text" name="term" id="term" autocapitalize="none" placeholder="Optional">
        <label for="content">Campaign Content (<code>utm_content</code>)</label>
        <input type="text" name="content" id="content" autocapitalize="none" placeholder="Optional">
      </fieldset>
    </form>
    <label for="url">The <abbr title="Uniform Resource Locator">URL</abbr> with <abbr title="Urchin Tracking Module">UTM</abbr> tags</label>
    <textarea id="url" readonly="readonly" wrap="off" onclick="this.focus();this.select()" rows="3">https://vreeman.com</textarea>
    <p><abbr title="Hypertext Transfer Protocol">HTTP</abbr> response status code: <b><span id="statuscode"></span></b></p>
    <button onclick="copyURL()">Copy URL with <abbr title="Urchin Tracking Module">UTM</abbr></button> <!-- <button onclick="indexThis()">Google Indexing API</button> -->
    <h2>Check the URL with more tools</h2>
    <ul>
      <li><a id="pagespeed" href="https://developers.google.com/speed/pagespeed/insights/?url=https://vreeman.com" rel="nofollow noopener noreferrer" target="_blank">Check Pagespeed Insights</a></li>
      <li><a id="structureddata" href="https://search.google.com/structured-data/testing-tool/u/0/#url=https://vreeman.com" rel="nofollow noopener noreferrer" target="_blank">Check Structured Data</a></li>
      <li><a id="richresults" href="https://search.google.com/test/rich-results?url=https://vreeman.com" rel="nofollow noopener noreferrer" target="_blank">Check Rich Results</a></li>
      <li><a id="schemaorg" href="https://validator.schema.org/#url=https://vreeman.com" rel="nofollow noopener noreferrer" target="_blank">Check Schema Markup Validator</a></li>
      <li><a id="safebrowsing" href="https://www.google.com/transparencyreport/safebrowsing/diagnostic/index.html#url=https://vreeman.com" rel="nofollow noopener noreferrer" target="_blank">Check Safe Browsing Site Status</a></li>
      <li><a id="mobilefriendly" href="https://search.google.com/test/mobile-friendly?url=https://vreeman.com" rel="nofollow noopener noreferrer" target="_blank">Check Mobile-Friendliness</a></li>
      <li><a id="bing" href="https://www.bing.com/webmasters/urlinspection?urlToInspect=https://vreeman.com" rel="nofollow noopener noreferrer" target="_blank">Check in Bing Webmaster Tools</a></li>
      <li><a id="twitter" href="https://cards-dev.twitter.com/validator" rel="nofollow noopener noreferrer" target="_blank">Check Twitter Validator</a></li>
      <li><a id="facebook" href="https://developers.facebook.com/tools/debug/sharing/?q=https://vreeman.com" rel="nofollow noopener noreferrer" target="_blank">Check Facebook Debugger</a></li>
      <li><a id="opengraph" href="https://developers.facebook.com/tools/debug/og/object/?q=https://vreeman.com" rel="nofollow noopener noreferrer" target="_blank">Check Open Graph Object Debugger</a></li>
      <li><a id="pinterest" href="https://developers.pinterest.com/tools/url-debugger/?link=https://vreeman.com" rel="nofollow noopener noreferrer" target="_blank">Check Pinterest</a></li>
      <li><a id="linkedin" href="https://www.linkedin.com/post-inspector/inspect/https:%2F%2Fvreeman.com" rel="nofollow noopener noreferrer" target="_blank">Check LinkedIn</a></li>
      <li><a id="fullcache" href="http://webcache.googleusercontent.com/search?q=cache:https://vreeman.com/&num=1&hl=en&gl=en&strip=0&vwsrc=0" rel="nofollow noopener noreferrer" target="_blank">Full version Google Cache</a></li>
      <li><a id="textcache" href="http://webcache.googleusercontent.com/search?q=cache:https://vreeman.com/&num=1&hl=en&gl=en&strip=1&vwsrc=0" rel="nofollow noopener noreferrer" target="_blank">Text-only version Google Cache</a></li>
      <li><a id="sourcecache" href="http://webcache.googleusercontent.com/search?q=cache:https://vreeman.com/&num=1&hl=en&gl=en&strip=0&vwsrc=1" rel="nofollow noopener noreferrer" target="_blank">View source via Google Cache</a></li>
      <li><a id="amp" href="https://validator.ampproject.org/#url=https://vreeman.com/" rel="nofollow noopener noreferrer" target="_blank">Check AMP</a> </li>
      <li><a id="ampbench" href="https://ampbench.appspot.com/validate?url=https://vreeman.com/" rel="nofollow noopener noreferrer" target="_blank">Check AMP Bench</a></li>
      <li><a id="ampgoogle" href="https://search.google.com/test/amp?url=https://vreeman.com/" rel="nofollow noopener noreferrer" target="_blank">Check AMP with Google</a></li>
      <li><a id="ssl" href="https://www.ssllabs.com/ssltest/analyze.html?d=https://vreeman.com" rel="nofollow noopener noreferrer" target="_blank">SSL Server Test</a></li>
      <li><a id="mozilla" href="https://observatory.mozilla.org/" rel="nofollow noopener noreferrer" target="_blank">Mozilla Observatory</a></li>
      <li><a href="https://search.developer.apple.com/appsearch-validation-tool" target="_blank" rel="nofollow noopener noreferrer">Apple App Search API Validation Tool</a></li>
      <li><a id="googlesitemap" href="https://google.com/ping?sitemap=https://vreeman.com/sitemap.xml" target="_blank" rel="nofollow noopener noreferrer">Ping Google with XML Sitemap</a></li>
      <li><a id="bingsitemap" href="https://bing.com/ping?sitemap=https://vreeman.com/sitemap.xml" target="_blank" rel="nofollow noopener noreferrer">Ping Bing with XML Sitemap</a></li>
    </ul>
    <!-- <hr>
    <div id="wrapper">
      <h1>Chrome User Experience Report API demo</h1>
      <p>The field data collected over the last 28 days.</p>
    </div>
    <hr> -->
    <p>Besides this Google Analytics UTM Campaign URL Builder I made a list of handy <a href="cro.html" title="CRO Tools"><abbr title="Conversion Rate Optimization">CRO</abbr> tools</a>, <a href="mp.html" title="Google Analytics Measurement Protocol Hit Builder">Google Analytics Measurement Protocol Hit Builder</a> and <a href="hypothesis.html" title="A/B Test Hypothesis Builder">Experiment Hypothesis Builder</a>.</p>
    <hr>
    <footer>
      <p>Vreeman.com is the personal website of <a class="h-card" rel="me" href="https://vreeman.com" title="Simon Vreeman">Simon Vreeman</a>.</p>
      <dl>
        <dt>Privacy &amp; Cookie Policy</dt>
        <dd>Vreeman.com uses Google Analytics (<code>_ga</code> &amp; <code>AMP_TOKEN</code>), Google Tag Manager and DoubleClick to measure and analyze anonymous user behavior data for improving the website in an ethical manner. Vreeman.com uses <abbr title="Accelerated Mobile Pages Project">AMP</abbr>, Cloudflare (<code>__cfduid</code>) and is hosted on Github pages to ensure it loads fast.</dd>
        <dt>Licenses</dt>
        <dd>Text is licensed under <a href="https://creativecommons.org/licenses/by/4.0/" rel="license" title="Creative Commons Attribution 4.0 International License" data-vars-outbound-text="Creative Commons License" data-vars-outbound-link="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>. <code>&lt;/&gt;</code> is licensed under <a href="https://opensource.org/licenses/MIT" rel="license" title="MIT License" data-vars-outbound-text="MIT License" data-vars-outbound-link="https://opensource.org/licenses/MIT">MIT License</a>.</dd>
        <dt>Other</dt>
        <dd>
          <ul>
              <li><a href="https://vreeman.com/cro.html" title="CRO (Conversion Rate Optimization) Tools" data-vars-outbound-text="CRO Tools" data-vars-outbound-link="https://vreeman.com/cro.html"><abbr title="Conversion Rate Optimization">CRO</abbr> Tools</a></li>
              <li><a href="https://vreeman.com/f1.html" title="FIA Formula One (F1) 2020, 2019 & 2018 Calendar / Agenda, Teams and Drivers" data-vars-outbound-text="F1 Calendar" data-vars-outbound-link="https://vreeman.com/f1.html">F1 2021, 2020, 2019 &amp; 2018 Calendar, Teams &amp; Drivers</a></li>
              <li><a href="https://vreeman.com/gear.html" title="What is in my backpack?" data-vars-outbound-text="Travel Gear" data-vars-outbound-link="https://vreeman.com/gear.html">Travel Gear</a></li>
              <li><a href="https://vreeman.com/meditations/" title="Meditations by Marcus Aurelius. Translations by Gregory Hays." data-vars-outbound-text="Meditations" data-vars-outbound-link="https://vreeman.com/meditations/">Meditations by Marcus Aurelius</a></li>
              <li><a href="https://vreeman.com/discourses/" title="Discourses of Epictetus. Translations by George Long" data-vars-outbound-text="Discourses" data-vars-outbound-link="https://vreeman.com/discourses/">Discourses of Epictetus</a></li>
          </ul>
        </dd>
      </dl>
    </footer>
    <script>
function getUTM() {
  var campaigns = document.getElementById("campaigns").options[document.getElementById("campaigns").selectedIndex].value;
  var domain = document.getElementById("domain").value;
  var encodedomain = encodeURIComponent(domain).replace(/'/g,"%27").replace(/"/g,"%22");
  var source = document.getElementById("source").value.toLowerCase();
  var medium = document.getElementById("medium").value.toLowerCase();
  var name = document.getElementById("name").value.toLowerCase();
  var term = document.getElementById("term").value.toLowerCase();
  var content = document.getElementById("content").value.toLowerCase();
  var url = document.getElementById("url");
  var statuscode = document.getElementById("statuscode");
  var html;

  if (campaigns === 'email') {
    medium = document.getElementById("medium").value = "email";
  }

  if (domain.indexOf("?") != -1) {
    html = domain+'&utm_source='+encodeURIComponent(source)+'&utm_medium='+encodeURIComponent(medium)+'&utm_campaign='+encodeURIComponent(name);
  } else {
    html = domain+'?utm_source='+encodeURIComponent(source)+'&utm_medium='+encodeURIComponent(medium)+'&utm_campaign='+encodeURIComponent(name);
  }

  if (term) {
    html = html + '&utm_term='+encodeURIComponent(term);
  }
  if (content) {
    html = html + '&utm_content='+encodeURIComponent(content);
  }

  url.textContent = html;

  // var httpRequest = new Request( html );
  // fetch(httpRequest).then(function(response) {
  //   statuscode.textContent = response.status;
  // });

  // if (source == null || source == "", medium == null || medium == "", name == null || name == "") {
  //   console.log("Please Fill All Required Field");
  //   return false;
  // }

  pagespeed.href = "https://developers.google.com/speed/pagespeed/insights/?url=" + domain;
  structureddata.href = "https://search.google.com/structured-data/testing-tool/u/0/#url=" + domain;
  richresults.href = "https://search.google.com/test/rich-results?url=" + domain;
  schemaorg.href = "https://validator.schema.org/#url=" + domain;
  safebrowsing.href = "https://www.google.com/transparencyreport/safebrowsing/diagnostic/index.html#url=" + domain;
  mobilefriendly.href = "https://search.google.com/test/mobile-friendly?url=" + domain;
  bing.href = "https://www.bing.com/webmasters/urlinspection?urlToInspect=" + domain;
  twitter.href = "https://cards-dev.twitter.com/validator?url=" + domain;
  facebook.href = "https://developers.facebook.com/tools/debug/sharing/?q=" + domain;
  opengraph.href = "https://developers.facebook.com/tools/debug/og/object/?q=" + domain;
  pinterest.href = "https://developers.pinterest.com/tools/url-debugger/?link=" + domain;
  linkedin.href = "https://www.linkedin.com/post-inspector/inspect/" + encodedomain;
  fullcache.href = "http://webcache.googleusercontent.com/search?q=cache:" + domain + "&num=1&hl=en&gl=en&strip=0&vwsrc=0";
  textcache.href = "http://webcache.googleusercontent.com/search?q=cache:" + domain + "&num=1&hl=en&gl=en&strip=1&vwsrc=0";
  sourcecache.href = "http://webcache.googleusercontent.com/search?q=cache:" + domain + "&num=1&hl=en&gl=en&strip=0&vwsrc=1";
  amp.href = "https://validator.ampproject.org/#url=" + domain;
  ampbench.href = "https://ampbench.appspot.com/validate?url=" + domain;
  ampgoogle.href = "https://search.google.com/test/amp?url=" + domain;
  ssl.href = "https://www.ssllabs.com/ssltest/analyze.html?d=" + domain;
  googlesitemap.href = "https://google.com/ping?sitemap=" + domain;
  bingsitemap.href = "https://bing.com/ping?sitemap=" + domain;
}
    </script>
    <script>
      function copyURL() {
        var url = document.getElementById("url");
        url.select();
        document.execCommand("Copy");
      }
    </script>
    <script>
      function indexThis() {
        var payloadURL = document.getElementById("domain").value;
        var url = "http://www.google.com/";
        var method = "POST";
        var postData = "Some-Data";
        var shouldBeAsync = true;
        var request = new XMLHttpRequest();

        request.onload = function () {
          var status = request.status; // HTTP response status, e.g., 200 for "200 OK"
          var data = request.responseText; // Returned data, e.g., an HTML document.
        }

        request.open(method, url, shouldBeAsync);

        request.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
        // Or... request.setRequestHeader("Content-Type", "text/plain;charset=UTF-8");
        // Or... whatever

        // Actually sends the request to the server.
        request.send(postData);
        
        console.log("Domain: " + url);
      }
    </script>
    <!-- <script>
      var apiKey = "AIzaSyA1dkiJ3MH4Ob5OIrxDI0ADYVaqYgBPnEs";
      var payloadURL = document.getElementById("domain").value;

      /**
       * @url https://developers.google.com/web/tools/chrome-user-experience-report/api/guides/getting-started
       */
      const CrUXApiUtil = {
        /**
         * Query the CrUX API for metric records
         * @param {{origin?: string, url?: string, formFactor?: string,  metrics?: Array<string>}} requestBody
         * @param {string} apiKey
         * @return {{record: {key: Object, metrics: Map<string, {histogram: Array<{ start: number, end?: number, density: number}>}>}, urlNormalizationDetails: Object}}
         */
        query: async function (requestBody, apiKey) {
          const endpointUrl = 'https://chromeuxreport.googleapis.com/v1/records:queryRecord';
          const resp = await fetch(`${endpointUrl}?key=${apiKey}`, {
            method: 'POST',
            body: JSON.stringify(requestBody),
          });
          const json = await resp.json();
          if (!resp.ok) throw new Error(json.error.message);
          return json;
        }
      };

      // Gather the data for example.com and display it
      //(async function () {
        function getCRUXdata () {
        const json = await CrUXApiUtil.query({origin: + payloadURL}, apiKey);
        console.log('CrUX API response:', json);

        const labeledMetrics = labelMetricData(json.record.metrics);

        // Display metric results
        for (const metric of labeledMetrics) {
          const metricEl = document.createElement('section');

          const titleEl = document.createElement('h2');
          titleEl.textContent = metric.acronym;

          const [descEl, barsEl] = createDescriptionAndBars(metric.labeledBins);

          metricEl.append(titleEl, descEl, barsEl);
          document.getElementById('wrapper').append(metricEl);
        }
      }();

      /**
       * Utility method to transform the response's metric data into an array of usable metric objects
       * Example return value:
        [
          {
            "acronym": "FCP",
            "name": "first_contentful_paint",
            "labeledBins": [{
              "label": "good",
              "percentage": 43.51,
              "start": 0,
              "end": 1000,
              "density": 0.4351
            }, // ... (other bins) ]
          }, // ... (other metrics) ]
      *
      * @return {{acronym: string, name: string, labelsBins: Array<{label: 'good'|'needs improvement'|'poor', percentage: number, start: number, end?: number, density: number}>}}
      */
      function labelMetricData(metrics) {
        const nameToAcronymMap = {
          first_contentful_paint: 'FCP',
          largest_contentful_paint: 'LCP',
          first_input_delay: 'FID',
          cumulative_layout_shift: 'CLS',
        };

        return Object.entries(metrics).map(([metricName, metricData]) => {
          const standardBinLabels = ['good', 'needs improvement', 'poor'];
          const metricBins = metricData.histogram;

          // We assume there are 3 histogram bins and they're in order of: good => poor
          const labeledBins = metricBins.map((bin, i) => {
            // Assign a good/poor label, calculate a percentage, and add retain all existing bin properties
            return {
              label: standardBinLabels[i],
              percentage: bin.density * 100,
              ...bin,
            };
          });

          return {
            acronym: nameToAcronymMap[metricName],
            name: metricName,
            labeledBins,
          };
        });
      }

      // Create the three bars w/ a 3-column grid
      // This consumes the output from labelMetricData, not a raw API response.
      function createDescriptionAndBars(labeledBins) {
        const descEl = document.createElement('p');
        // Example: 'good: 43.63%, needs improvement: 42.10%, poor: 14.27%'
        descEl.textContent = labeledBins
          .map(bin => `${bin.label}: ${bin.percentage.toFixed(2)}%`)
          .join(', ');

        let barsEl = document.createElement('div');

        for (const bin of labeledBins) {
          const barEl = document.createElement('div');
          // Reuse the label for the styling class, changing any spaces:  `needs improvement` => `needs-improvement`
          barEl.classList.add(`box-${bin.label.replace(' ', '-')}`);
          // Add tooltip to share the size of each bin
          barEl.title = `bin start: ${bin.start}, bin end: ${bin.end}`;
          barsEl.append(barEl);
        }

        // Set the width of the bar columns based on metric bins
        // Ex: `grid-template-columns: 43.51% 42.26% 14.23%`;
        barsEl.style.gridTemplateColumns = labeledBins.map(bin => `${bin.percentage}%`).join(' ');
        barsEl.classList.add(`grid-container`);

        return [descEl, barsEl];
      }

    </script> -->
  </body>
</html>
